{% extends 'layout.html' %}
{% block content %}
<div class="card">
    <h2>Reconnaissance</h2>
    <form method="post">
        <label>Cible IP :</label>
        <input type="text" name="target" required>
        <label>Mode :</label>
        <select name="mode" id="mode" onchange="toggleReconFields()">
            <option value="scan_port">Scan de port</option>
            <option value="scan_icmp">Scan ICMP</option>
            <option value="service_version">Détection service/version</option>
        </select>
        <div id="scan_port_fields">
            <label>Ports (ex: 22,80,443) :</label>
            <input type="text" name="ports">
        </div>
        <div id="service_version_fields" style="display:none;">
            <label>Port précis (optionnel) :</label>
            <input type="text" name="port">
        </div>
        <label>Outil :</label>
        <select name="outil">
            <option value="scapy">Scapy</option>
            <option value="nmap">Nmap</option>
        </select>
        <button type="submit">Lancer</button>
    </form>
    {% if result %}
    <div class="result-box">
        <h3>Résultat du test :</h3>
        <pre>{{ result }}</pre>
    </div>
    {% endif %}
</div>
<script>
function toggleReconFields() {
    var mode = document.getElementById('mode').value;
    document.getElementById('scan_port_fields').style.display = (mode === 'scan_port') ? '' : 'none';
    document.getElementById('service_version_fields').style.display = (mode === 'service_version') ? '' : 'none';
}
document.addEventListener('DOMContentLoaded', toggleReconFields);
</script>
{% endblock %}
