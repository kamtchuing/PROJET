{% extends 'layout.html' %}
{% block content %}
<div class="card">
    <h2>Brute Force</h2>
    <form id="bruteForm" onsubmit="launchBrute(event)">
        <label>Cible IP :</label>
        <input type="text" name="target" id="target" required>
        <label>Nom d'utilisateur :</label>
        <input type="text" name="username" id="username" required>
        <label>Port SSH (d√©faut 22) :</label>
        <input type="text" name="port" id="port" value="22">
        <label>Wordlist :</label>
        <input type="text" name="wordlist" id="wordlist" value="/usr/share/wordlists/rockyou.txt">
        <label>Mode :</label>
        <select name="mode" id="mode">
            <option value="permutation">Permutation</option>
            <option value="dictionnaire">Dictionnaire</option>
        </select>
        <label>Outil :</label>
        <select name="outil" id="outil">
            <option value="paramiko">Paramiko (Python)</option>
            <option value="hydra">Hydra</option>
        </select>
        <button type="submit" class="btn" id="runBtn">Lancer</button>
        <button type="button" class="btn btn-danger" id="stopBtn" onclick="stopTest()">Stop</button>
        <span class="spinner" id="spinner"></span>
    </form>
    <div id="terminal" class="terminal-container"></div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.4.1/socket.io.min.js"></script>
<script src="/static/test_runner.js"></script>
<script>
document.getElementById('bruteForm').onsubmit = function(e) {
        setRunning(true);
        launchTest(e, 'bruteForm', 'launch_brute', ['target','username','port','wordlist','mode','outil'], 'terminal');
};
function stopTest(){ socket.emit('stop'); }
function setRunning(r){
    document.getElementById('spinner').style.display = r ? 'inline-block' : 'none';
    document.getElementById('runBtn').disabled = r;
    document.getElementById('stopBtn').disabled = !r;
}
socket.on('end', function(){ setRunning(false); });
</script>
{% endblock %}
