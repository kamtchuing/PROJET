{% extends 'layout.html' %}
{% block content %}
<div class="card">
    <h2>Brute Force</h2>
    <form id="bruteForm" onsubmit="launchBrute(event)">
        <label>Cible IP :</label>
        <input type="text" name="target" id="target" required>
        <label>Nom d'utilisateur :</label>
        <input type="text" name="username" id="username" required>
        <label>Port SSH (d√©faut 22) :</label>
        <input type="text" name="port" id="port" value="22">
        <label>Wordlist :</label>
        <input type="text" name="wordlist" id="wordlist" value="/usr/share/wordlists/rockyou.txt">
        <label>Mode :</label>
        <select name="mode" id="mode">
            <option value="permutation">Permutation</option>
            <option value="dictionnaire">Dictionnaire</option>
        </select>
        <label>Outil :</label>
        <select name="outil" id="outil">
            <option value="paramiko">Paramiko (Python)</option>
            <option value="hydra">Hydra</option>
        </select>
        <button type="submit">Lancer</button>
    </form>
    <div id="terminal" class="result-box" style="min-height:200px;"></div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.4.1/socket.io.min.js"></script>
<script>
var socket = io();
function launchBrute(e) {
    e.preventDefault();
    document.getElementById('terminal').innerHTML = '';
    var data = {
        target: document.getElementById('target').value,
        username: document.getElementById('username').value,
        port: document.getElementById('port').value,
        wordlist: document.getElementById('wordlist').value,
        mode: document.getElementById('mode').value,
        outil: document.getElementById('outil').value
    };
    socket.emit('launch_brute', data);
}
socket.on('log', function(data) {
    typeWriter(data.msg);
});
socket.on('end', function(data) {
    typeWriter(data.msg);
});
function typeWriter(text) {
    let term = document.getElementById('terminal');
    let i = 0;
    let line = document.createElement('div');
    term.appendChild(line);
    function printChar() {
        if (i < text.length) {
            line.innerHTML += text.charAt(i);
            i++;
            setTimeout(printChar, 10);
        }
    }
    printChar();
}
</script>
{% endblock %}
